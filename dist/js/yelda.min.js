!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("YeldaChat",[],t):"object"==typeof exports?exports.YeldaChat=t():e.YeldaChat=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="yfVp")}({"2GTP":function(e,t,n){var i=n("eaoh");e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)}}return function(){return e.apply(t,arguments)}}},"2faE":function(e,t,n){var i=n("5K7Z"),a=n("eUtF"),r=n("G8Mo"),o=Object.defineProperty;t.f=n("jmDH")?Object.defineProperty:function(e,t,n){if(i(e),t=r(t,!0),i(n),a)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},"5K7Z":function(e,t,n){var i=n("93I4");e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},"5T2Y":function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"93I4":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"B+OT":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},G8Mo:function(e,t,n){var i=n("93I4");e.exports=function(e,t){if(!i(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!i(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!i(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!i(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},Hsns:function(e,t,n){var i=n("93I4"),a=n("5T2Y").document,r=i(a)&&i(a.createElement);e.exports=function(e){return r?a.createElement(e):{}}},KUxP:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},NegM:function(e,t,n){var i=n("2faE"),a=n("rr1i");e.exports=n("jmDH")?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},"RU/L":function(e,t,n){n("Rqdy");var i=n("WEpk").Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},Rqdy:function(e,t,n){var i=n("Y7ZC");i(i.S+i.F*!n("jmDH"),"Object",{defineProperty:n("2faE").f})},SEkw:function(e,t,n){e.exports={default:n("RU/L"),__esModule:!0}},V7oC:function(e,t,n){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("SEkw"));t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,i.default)(e,a.key,a)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},WEpk:function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},Y7ZC:function(e,t,n){var i=n("5T2Y"),a=n("WEpk"),r=n("2GTP"),o=n("NegM"),s=n("B+OT"),u=function(e,t,n){var c,f,l,d=e&u.F,h=e&u.G,m=e&u.S,p=e&u.P,y=e&u.B,v=e&u.W,b=h?a:a[t]||(a[t]={}),g=b.prototype,w=h?i:m?i[t]:(i[t]||{}).prototype;for(c in h&&(n=t),n)(f=!d&&w&&void 0!==w[c])&&s(b,c)||(l=f?w[c]:n[c],b[c]=h&&"function"!=typeof w[c]?n[c]:y&&f?r(l,i):v&&w[c]==l?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?r(Function.call,l):l,p&&((b.virtual||(b.virtual={}))[c]=l,e&u.R&&g&&!g[c]&&o(g,c,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},eUtF:function(e,t,n){e.exports=!n("jmDH")&&!n("KUxP")(function(){return 7!=Object.defineProperty(n("Hsns")("div"),"a",{get:function(){return 7}}).a})},eaoh:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},iCc5:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},jNOD:function(e,t,n){},jmDH:function(e,t,n){e.exports=!n("KUxP")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},rr1i:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},yfVp:function(e,t,n){"use strict";n.r(t);var i=n("iCc5"),a=n.n(i),r=n("V7oC"),o=n.n(r),s=(n("jNOD"),new(function(){function e(){a()(this,e)}return o()(e,[{key:"updateQueryStringParameter",value:function(e,t,n){var i=new RegExp("([?&])"+t+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return e.match(i)?e.replace(i,"$1"+t+"="+n+"$2"):e+a+t+"="+n}},{key:"createContainer",value:function(){this.webChatContainer||(this.webChatContainer=document.createElement("div"),this.webChatContainer.setAttribute("id","yelda_container"),this.webChatContainer.setAttribute("class","yelda_container"),document.body.appendChild(this.webChatContainer))}},{key:"addAssistantImage",value:function(){this.webChatContainer||(this.webChatContainer=document.getElementById("yelda_container")),this.assistantImage=document.createElement("div"),this.assistantImage.setAttribute("id","assistant_img"),this.assistantImage.setAttribute("class","assistant_img"),this.assistantImage.innerHTML='<i class="fas fa-comment"></i>',this.webChatContainer.appendChild(this.assistantImage)}},{key:"createWebChatURL",value:function(e){var t=e.chatUrl;return t=this.updateQueryStringParameter(t,"assistantId",e.assistantId),t=this.updateQueryStringParameter(t,"assistantSlug",e.assistantSlug),t=this.updateQueryStringParameter(t,"locale",e.locale),e.isAdmin&&(t=this.updateQueryStringParameter(t,"isAdmin",e.isAdmin)),t}},{key:"createWebChatFrame",value:function(e){this.webChatContainer||(this.webChatContainer=document.getElementById("yelda_container")),this.iframeContainer=document.createElement("div"),this.iframeContainer.setAttribute("id","yelda_iframe_container"),this.iframeContainer.setAttribute("class","yelda_iframe_container"),this.iframeContainer.style.cssText="display: none;",this.webChatContainer.appendChild(this.iframeContainer);var t=document.createElement("iframe");return t.src=e,t.id="web_chat_frame",t.name="frame",t.style.border="0",this.iframeContainer.appendChild(t),t}},{key:"triggerEvent",value:function(e,t){if("function"==typeof Event)e.dispatchEvent(new Event(t));else{var n=window.document.createEvent("UIEvents");n.initUIEvent(t,!0,!1,window,0),e.dispatchEvent(n)}}},{key:"handleFrameListner",value:function(){var e=this,t=window.addEventListener?"addEventListener":"attachEvent";(0,window[t])("attachEvent"===t?"onmessage":"message",function(t){"closeChat"===t.data||"closeChat"===t.message?(document.getElementById("web_chat_frame").classList.remove("y_active"),setTimeout(function(){document.getElementById("assistant_img").style.display="block",document.getElementById("yelda_iframe_container").style.display="none"},1e3)):"openChat"!==t.data&&"openChat"!==t.message||e.triggerEvent(document.getElementById("assistant_img"),"click")})}},{key:"handleOnResize",value:function(){if(window.outerWidth<768){var e=window,t=document,n=t.documentElement,i=t.getElementsByTagName("body")[0],a=e.innerWidth||n.clientWidth||i.clientWidth,r=e.innerHeight||n.clientHeight||i.clientHeight;this.webChatContainer.classList.add("yelda_mobile"),this.webChatIframe.style.width=a+"px",this.webChatIframe.style.height=r+"px"}else this.webChatContainer.classList.remove("yelda_mobile")}},{key:"loadCssAsync",value:function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.crossorigin="anonymous",n.href=e+"/yelda/css/injector.min.css",n.media="all",t.appendChild(n)}},{key:"setUpChatIFrame",value:function(e){var t=this.createWebChatURL(e);this.webChatIframe=this.createWebChatFrame(t)}},{key:"resetChat",value:function(e,t){t.remove(),e=this.formatData(e),this.setUpChatIFrame(e),document.getElementById("assistant_img").style.display="block"}},{key:"formatData",value:function(e){return e.assistantUrl=e.assistantUrl||"https://app.yelda.ai",e.chatPath=e.chatPath||"",e.chatUrl=e.assistantUrl+e.chatPath,e.locale=e.locale||"fr_FR",e.isAdmin=!!e.isAdmin,e}},{key:"setupChat",value:function(e){e=this.formatData(e),this.createContainer(),this.addAssistantImage(),this.setUpChatIFrame(e),window.addEventListener("resize",this.handleOnResize.bind(this)),this.triggerEvent(window,"resize"),document.getElementById("assistant_img").addEventListener("click",function(e){document.getElementById("assistant_img").style.display="none",document.getElementById("yelda_iframe_container").style.display="block",document.getElementById("web_chat_frame").classList.add("y_active"),document.getElementById("web_chat_frame").contentWindow.postMessage("openChat","*")}),this.handleFrameListner()}},{key:"init",value:function(e){var t=this;window.onload=function(n){t.setupChat(e)}}}]),e}()));"undefined"!=typeof window&&(window.yeldaChat=s),t.default=s}}).default});